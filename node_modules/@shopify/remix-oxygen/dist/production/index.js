import {createRequestHandler}from'react-router';export{createCookie,createCookieSessionStorage,createMemorySessionStorage,createSession,createSessionStorage,data,isCookie,isSession,redirect,redirectDocument}from'react-router';var d=Error.prototype.toString;Error.prototype.toString=function(){return this.stack||d.call(this)};function l({build:r,mode:e,poweredByHeader:a=true,getLoadContext:n}){let u=createRequestHandler(r,e);return async t=>{let o=t.method;if((o==="GET"||o==="HEAD")&&t.body)return new Response(`${o} requests cannot have a body`,{status:400});let s=new URL(t.url);if(s.pathname.includes("//"))return new Response(null,{status:301,headers:{location:s.pathname.replace(/\/+/g,"/")}});let p=n?await n(t):void 0,i=await u(t,p);return a&&i.headers.append("powered-by","Shopify, Hydrogen"),i}}function g(r){let e=r.headers;return {requestGroupId:e.get("request-id"),buyerIp:e.get("oxygen-buyer-ip"),cookie:e.get("cookie"),purpose:e.get("purpose")}}
export{l as createRequestHandler,g as getStorefrontHeaders};//# sourceMappingURL=index.js.map
//# sourceMappingURL=index.js.map